package user

import (
	"avalonia_server/api/datastore"
	"github.com/gin-gonic/gin"
	"log"
)

func UserMessageGroupApi(r *gin.Context) {
	user_id := r.Query("user_id")
	log.Println(user_id)
	user := datastore.AllUsers[user_id]
	data := []*datastore.UserMessageGroup{}
	if user != nil {
		for _, val := range user.MessageGroups {
			data = append(data, datastore.AllGroup[val])
		}
	}

	for _, group := range datastore.AllGroup {
		data = append(data, group)
	}
	
	r.JSON(200, gin.H{
		"code": 200,
		"msg":  "success",
		"data": data,
	})
}
