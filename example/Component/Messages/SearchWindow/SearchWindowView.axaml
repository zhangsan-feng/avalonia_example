<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        xmlns:vm="clr-namespace:example.Component.Messages.SearchWindow"
        x:DataType="vm:SearchWindowViewModel"
        WindowStartupLocation="CenterOwner"
        Width="600"
        Height="650"
        CanResize="False"
        x:Class="example.Component.Messages.SearchWindow.SearchWindowView"
        Title="搜索群聊和用户">
  <Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="50" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <!-- 搜索区域 -->
    <Grid Grid.Row="0">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="Auto" />
        </Grid.ColumnDefinitions>

        <TextBox Grid.Column="0" 
                 Text="{Binding SearchText}" 
                 VerticalAlignment="Center" 
                 Margin="5"
                 Watermark="输入群名或用户名搜索" />

        <Button Grid.Column="1" 
                Content="搜索" 
                VerticalAlignment="Center" 
                Margin="5"
                Command="{Binding SearchCommand}" />
    </Grid>


    <TabControl Grid.Row="1" Padding="10">
        <!-- 群聊 Tab -->
        <TabItem Header="群聊" FontSize="18">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ListBox ItemsSource="{Binding SearchGroups}"
                         MinHeight="100">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Background="Transparent" Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="50" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="50" />
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="40" Height="40" CornerRadius="20" ClipToBounds="True">
                                    <Image Source="{Binding Avatar}" Stretch="UniformToFill" />
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                                    <TextBlock Text="{Binding Type}" FontSize="12" Foreground="Gray" />
                                </StackPanel>

                                <Button Grid.Column="2" Content="加入" Click="JoinGroupChatButton_Click" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </ScrollViewer>
        </TabItem>

 
        <TabItem Header="用户" FontSize="18">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ListBox ItemsSource="{Binding SearchUsers}"
                         MinHeight="100">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <Grid Background="Transparent" Margin="0,5">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="50" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="50" />
                                </Grid.ColumnDefinitions>

                                <Border Grid.Column="0" Width="40" Height="40" CornerRadius="20" ClipToBounds="True">
                                    <Image Source="{Binding Avatar}" Stretch="UniformToFill" />
                                </Border>

                                <StackPanel Grid.Column="1" VerticalAlignment="Center">
                                    <TextBlock Text="{Binding Name}" FontWeight="SemiBold" />
                                    <TextBlock Text="{Binding Status}" FontSize="12" Foreground="Gray" />
                                </StackPanel>

                                <Button Grid.Column="2" Content="添加" Click="AddUserFriendButton_Click" />
                            </Grid>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </ScrollViewer>
        </TabItem>
    </TabControl>
</Grid>
</Window>

