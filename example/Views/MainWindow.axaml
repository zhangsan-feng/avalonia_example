<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:example.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        MinWidth="1200"
        MinHeight="600"
        x:Class="example.Views.MainWindow"
        xmlns:rxui="http://reactiveui.net"
        xmlns:groupHistory="clr-namespace:example.Component.Messages.GroupHistory"
        x:DataType="vm:MainWindowViewModel"
        WindowStartupLocation="CenterScreen"

        Title="example">

    
    <Grid RowDefinitions="50 *" Name="MainGrid">


        <Grid Grid.Row="0" Background="Bisque"></Grid>
        <Grid Grid.Row="1" Grid.ColumnDefinitions="Auto 1 *">

            
            <Grid Grid.Column="0" >
                <Grid >
                    <Grid.RowDefinitions>
                        <RowDefinition Height="8*" />
                        <RowDefinition Height="2*" />
                    </Grid.RowDefinitions>

                    <ListBox Grid.Row="0"
                        Background="#ffff"
                        ItemsSource="{Binding MenuItems}"
                        SelectedItem="{Binding SelectedMenuItem}">

                        <ListBox.ItemContainerTheme>
                            <ControlTheme TargetType="ListBoxItem">
                                <Setter Property="Template">
                                    <ControlTemplate>
                                        <Border Background="{TemplateBinding Background}"
                                                Padding="{TemplateBinding Padding}">
                                            <ContentPresenter Content="{TemplateBinding Content}"
                                                              ContentTemplate="{TemplateBinding ContentTemplate}" />
                                        </Border>
                                    </ControlTemplate>
                                </Setter>
                                <!-- 默认样式 -->
                                <Setter Property="Background" Value="Transparent" />
                                <Setter Property="Foreground" Value="Black" />
                                <Setter Property="Padding" Value="0" />
                            </ControlTheme>
                        </ListBox.ItemContainerTheme>

                        <ListBox.Styles>
                            <!-- 选中状态 -->
                            <Style Selector="ListBoxItem:selected">
                                <Setter Property="Background" Value="#FF4A90E2" />
                                <Setter Property="Foreground" Value="White" />
                            </Style>

                            <!-- 悬停状态 -->
                            <Style Selector="ListBoxItem:pointerover">
                                <Setter Property="Background" Value="BlanchedAlmond" />
                            </Style>

                            <!-- 选中+悬停（可选） -->
                            <Style Selector="ListBoxItem:selected:pointerover">
                                <Setter Property="Background" Value="#FF357ABD" />
                            </Style>
                        </ListBox.Styles>

                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                    <Border VerticalAlignment="Center" Margin="15 0 0 0">
                                        <Image Width="25" Height="25" Source="{Binding Icon}"
                                               Stretch="Uniform" />
                                    </Border>
                                    <TextBlock Text="{Binding Title}" Margin="10" FontSize="16" />
                                </StackPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                    
                    <Grid Grid.Row="1" >
                        <StackPanel Orientation="Vertical" HorizontalAlignment="Center">
                            <Button Background="#ffff">
                                <Image Width="20" Source="avares://example/Assets/icons8-mailing-64.png"></Image>
                            </Button>
                            <Button Background="#ffff">
                                <Image Width="20" Source="avares://example/Assets/icons8-iphone-16-pro-50.png"></Image>
                            </Button>
                            <Button Background="#ffff" Command="{Binding Button_OnClick}" Name="BorderPopupButton" VerticalAlignment="Center">
                                <Image Width="20" Source="avares://example/Assets/settings_icon.png"></Image>
               
                                <Button.Flyout>
                                    <MenuFlyout Placement="RightEdgeAlignedBottom">
                                        <MenuItem Header="聊天记录管理" />
                                        <MenuItem Header="检查更新" />
                                        <MenuItem Header="帮助" />
                                        <MenuItem Header="锁定" />
                                        <MenuItem Header="设置" />
                                        <MenuItem Header="退出账号" />
                                    </MenuFlyout>
                                </Button.Flyout>
                            </Button>
                        </StackPanel>
                    </Grid> 
                </Grid>


            </Grid>
            <Grid Grid.Column="2"  PointerPressed="Mask_PointerPressed">
                <rxui:RoutedViewHost
                    Router="{Binding Router}">
                    <rxui:RoutedViewHost.DefaultContent>
                        <TextBlock Text="Loading..."
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center" />
                    </rxui:RoutedViewHost.DefaultContent>
                </rxui:RoutedViewHost>
            </Grid>
        </Grid>
    </Grid>
</Window>